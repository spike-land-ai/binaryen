# #2291: wasm::is{U,S}Integer64() doesn't work well around INT64_MAX

- **URL:** https://github.com/WebAssembly/binaryen/issues/2291
- **Author:** tzik
- **Created:** 2019-08-08
- **Updated:** 2019-08-12
- **Labels:** help wanted

## Description

The latest clang points a minor bug for -Wimplicit-int-float-conversion.

On the implementation of [wasm::wasm::isUInteger64](https://github.com/WebAssembly/binaryen/blob/ab3a1f65fb9d2e4ec7e2640daca0b3953a030da6/src/support/safe_integer.cpp#L52), `std::numeric_limits<uint64_t>::max()` is implicitly converted to double.
As double has only 53 bit for digits on typical systems, and the conversion rounds the value to 0x1p64 rather than 0x1p64 - 1, that implies `isUInteger64(0x1p64)` returns true, which is wrong.

We should probably use fixed double literals like 0x1p64, -0x1p63, and 0x1p63 for the boundary check here.

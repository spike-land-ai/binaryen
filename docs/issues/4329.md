# #4329: [Proposal] Add getMaxSignBits for tracking sign values

- **URL:** https://github.com/WebAssembly/binaryen/issues/4329
- **Author:** MaxGraey
- **Created:** 2021-11-14
- **Updated:** 2021-11-14

## Description

With existing `getMaxBits` we could provide wide range of optimizations but `getMaxBits` completely blind for signed operations and values. This leaves a lot of places that could be relatively easily optimised. For example:
```rust
i32(x) - i32(y) < 0   ->   x < y
``` 
If we know `x - y` never overflow (it required `getMaxSignBits` for signed comparison). Or more expressive example:
```rust
i32(x) * 400 / 100  ->  x * 4
```
if we know `getMaxSignBits(x) >= 9`.

For example:
```rust
(i32(x) >> 9) * 400 / 100   ->   (x >> 9) << 2
```
In general, `getMaxSignBits` is the building block for helpers that calculate the signed overflow for +, - and *

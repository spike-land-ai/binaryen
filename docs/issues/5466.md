# #5466: Using two reloopers in one function can cause block name collisions.

- **URL:** https://github.com/WebAssembly/binaryen/issues/5466
- **Author:** l1mey112
- **Created:** 2023-01-30
- **Updated:** 2023-02-03

## Description

I am writing a WebAssembly compiler backing for the V programming language using binaryen.

I use reloopers/CFG to generate if statements, there can be many in one function. With only two if statements corresponding to two invokes of a relooper, validation fails with this error message below.

```
[wasm-validator error in function main.powi] unexpected false: names in Binaryen IR must be unique - IR generators must ensure that, on 
block$3$break
```

Is there a way to make all relooper blocks unique? I am using the C API, which AFAIK does not have ways to solve this.

## Comments (3)

### kripken (2023-01-30)

Are those names you add yourself, or ones added internally by the relooper?

If it's internal, then likely we need a call to `wasm::UniqueNameMapper::uniquify` like we have in the parsers. But I see we already have that, so I'm not sure what could be going wrong, and a testcase might be needed,

https://github.com/WebAssembly/binaryen/blob/d19c31b371aab47dedd166c2d056f1c583c6a9a0/src/cfg/Relooper.cpp#L1615

---

### l1mey112 (2023-02-03)

Those names were created internally by the relooper. The first call went along fine, but a second call in another instance (whilst still inside the function) used duplicate names.

---

### kripken (2023-02-03)

I'm not sure what could be wrong then. If you can provide a testcase I could look at it.

---


# #7120: Missed opportunity to merge private types into public supertypes

- **URL:** https://github.com/WebAssembly/binaryen/issues/7120
- **Author:** tlively
- **Created:** 2024-11-26
- **Updated:** 2024-11-26

## Description

MergeTypes currently treats all public types as terminal DFA states, meaning they have no successors. This can prevent private subtypes of public types from being merged into the public supertypes because their states have different behavior.

The types in this test case are currently not merged, but they should be:

```
(module
 (type $public (sub (struct (field (ref null $public)))))
 (type $sub (sub $public (struct (field (ref null $public)))))

 (global $g (export "g") (ref null $public) (ref.null none))

 (func $test
  (local (ref $public))
  (local (ref $sub))
 )
)
```

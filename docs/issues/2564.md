# #2564: emscripten build with cmake fails in wasm-reduce

- **URL:** https://github.com/WebAssembly/binaryen/issues/2564
- **Author:** bvibber
- **Created:** 2019-12-31
- **Updated:** 2020-01-06
- **Labels:** help wanted, good first bug

## Description

The rest of the tools link in a build with a fairly current emscripten (1.39.4) except for `wasm-reduce`:

```
$ emconfigure cmake && emmake make -j12
...
[ 80%] Linking CXX executable bin/wasm-reduce.js
error: undefined symbol: popen
warning: To disable errors for undefined symbols use `-s ERROR_ON_UNDEFINED_SYMBOLS=0`
Error: Aborting compilation due to previous errors
shared:ERROR: '/Users/brion/src/emsdk/node/12.9.1_64bit/bin/node /Users/brion/src/emsdk/upstream/emscripten/src/compiler.js /var/folders/1l/zc63mhrx20b6mmzh5t2j_g200000gp/T/tmpugYlRM.txt' failed (1)
make[2]: *** [bin/wasm-reduce.js] Error 1
make[1]: *** [CMakeFiles/wasm-reduce.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....
```


## Comments (1)

### kripken (2020-01-06)

Oh, yes, that tool depends on popen which emscripten doesn't support (but maybe we could in Node.js if it has an API for that?). We should skip that tool when building with emscripten.

---


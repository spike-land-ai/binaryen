# #2198: I64ToI32Lowering fails on i64.trunc_sat_f64_s

- **URL:** https://github.com/WebAssembly/binaryen/issues/2198
- **Author:** kripken
- **Created:** 2019-07-02
- **Updated:** 2019-07-02

## Description

Testcase: run `bin/wasm-opt --flatten --i64-to-i32-lowering --all-features` on
```
(module
 (func $trunc_sat_f64_s (result i64)
  (drop
   (block $label$1 (result i32)
    (drop
     (block $label$2 (result i32)
      (drop
       (i64.trunc_sat_f64_s
        (f64.const -nan:0xfffff9a702f19)
       )
      )
      (i32.const 1)
     )
    )
    (i32.const 0)
   )
  )
  (unreachable)
 )
)
```


## Comments (1)

### kripken (2019-07-02)

Fails with
```
[wasm-validator error in function $trunc_sat_f64_s] 1 != 2: local.set type must match function, on 
[none] (local.set $0
 [i64] (i64.trunc_sat_f64_s
  [f64] (f64.const -nan:0xfffff9a702f19)
 )
)
```


---


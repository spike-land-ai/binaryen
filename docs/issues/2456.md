# #2456: Can BinaryenTypeAuto be deprecated?

- **URL:** https://github.com/WebAssembly/binaryen/issues/2456
- **Author:** tlively
- **Created:** 2019-11-20
- **Updated:** 2020-01-02

## Description

This magical type only exists in the C API. Does anyone use it for anything? If it were deprecated then we could use the Type id -1 for something else.

## Comments (3)

### dcodeIO (2019-11-27)

Iirc the intended use is when creating a block with binaryen.js, where if no type is specified explicitly, `auto` is used so one gets a proper block result type automatically instead of a validation error further down the road. At AssemblyScript we don't use it since we want to be certain about the result type.

---

### dcodeIO (2020-01-01)

With the updates to typed local.tee and typed select it turned out that we can now actually make use of the auto type. We are still not providing it to the C-API directly, but use it as the default when creating those expressions, so our API can determine the type from operands if no more specific type is provided. Ultimately it still isn't necessary to have the type in Binaryen itself with this and we could introduce our own constant, but one could argue that what we do on our side could as well be (or one day become) part of Binaryen itself. Hence not so sure anymore.

---

### tlively (2020-01-02)

Hmm, it sounds dangerous to define your own constants in the type index space since we don't explicitly reserve any values to be user-defined. Any constant you pick could therefore alias with some multivalue type. A simple fix to allow your use case to work safely would be to define a range of user-defined type values, but I'm not sure there is actually a compelling use case for that, since they can only really be used to signify the absence of a real type. Can you just use `Type::none` or `Type::unreachable` for that?

I don't want to use Type id -1 for anything else in particular any more, but BinaryenTypeAuto was previously [marked as deprecated](https://github.com/WebAssembly/binaryen/blob/81c16df401347e8e067fe9ccf0c26ae532bc03d5/src/js/binaryen.js-post.js#L42) in the JS API, so if no one is using it, I think we should go ahead and remove it for simplicity's sake.

---


# #2354: Asyncify lists use * as a wildcard, but function names can have *

- **URL:** https://github.com/WebAssembly/binaryen/issues/2354
- **Author:** kripken
- **Created:** 2019-09-24
- **Updated:** 2019-10-01

## Description

The names are full C++ names, so e.g. `void foo(int *x)` is a valid name. We treat that `*` as a wildcard currently, which may mean more things are matched than expected.

One solution is to use something other than `*` as a wildcard, but that would be annoying. Another option is to have separate lists for patterns and for specific names perhaps.

cc @Beuc 

## Comments (6)

### Beuc (2019-09-24)

In https://github.com/emscripten-core/emscripten/issues/9381#issuecomment-529235087 I had asked whether globbing was OK, considering that's how Emterpreter worked.
Did something change? New user bug report?

---

### kripken (2019-09-24)

No bug report, I just realized - kind of late :) - that in the Emterpreter we don't have `*` in function names (it's the C mangled name), but with the wasm backend we are forced to use the C++ human-readable name, which can have `*`.

So we do have a bug here that may eventually affect someone.

---

### Beuc (2019-09-25)

OK, I assumed that potentially overmatching an overloaded function was considered an acceptable simplicity/coverage compromise.

Adding new command-line parameters for wildcard patterns would be fine by me, and make their use more explicit/clearer in Makefile-s.

---

### dschuff (2019-09-25)

Backing up, this sounds like a case where we'd actually want to be using mangled names (e.g. anywhere you'd specify a list of functions in a command line or config file). What is forcing us to use demangled names?

---

### kripken (2019-09-25)

When LLVM emits a names section, it emits human-readable names in there, so that's all we have in the wasm, the mangled names are gone...

I am not totally happy with that, but that's how it works atm. It is nice for naive stack traces, which show the human-readable name, but it does make things harder for tools (and stack traces could be fixed up, e.g., firefox demangles them). cc @sbc100 who I discussed this with.


---

### Beuc (2019-10-01)

So what do we do? :)

---


# #4590: Support GC to non-GC conversion

- **URL:** https://github.com/WebAssembly/binaryen/issues/4590
- **Author:** sdeleuze
- **Created:** 2022-04-11
- **Updated:** 2022-07-25

## Description

Hi,

As far as I know, a few GCed languages/platform are working on WASM support by leveraging the GC proposal:
 - [Dart](https://github.com/flutter/flutter/wiki/Roadmap#dart)
 - [Kotlin](https://youtrack.jetbrains.com/issue/KT-46773)
 
[C#/.NET](https://github.com/dotnet/runtime/pull/67272) could be a candidate as well but per @SteveSandersonMS feedback it seems it is not using the GC proposal yet.

For now only V8 supports Wasm GC, while Wasm engines with great WASI support like Wamstime does not support it.
Since GC is not straightforward to implement for Wasm engines, I am wondering if Binaryen could implement behind a flag GC to non GC conversion in order to ease adoption of GCed languages with WASI for Cloud/Edge use cases. I guess that would include typed function references emulation.

Would such kind of compatibility conversion make sense as part of Binaryen?

## Comments (4)

### kripken (2022-04-11)

I think it could make sense. I have some work on that here: https://github.com/WebAssembly/binaryen/pull/4000 That lowers GC to linear memory but does not actually bundle a mark-sweep yet. Also, it's several months old and the wasm GC spec has evolved a lot, so it would need updating.

---

### SteveSandersonMS (2022-04-12)

Regarding C# / .NET, as far as I understood, our current implementation doesn't make use of the wasm GC proposal because its capabilities were not enough. @lewing would know for sure though!

---

### sdeleuze (2022-04-13)

@kripken Glad to hear it could potentially make sense, and thanks for the link the PR. The Kotlin team seems to be interested.

@SteveSandersonMS I have updated the description accordingly.

---

### lewing (2022-07-25)

> Regarding C# / .NET, as far as I understood, our current implementation doesn't make use of the wasm GC proposal because its capabilities were not enough. @lewing would know for sure though!

@vargaz outlined the issues here https://github.com/WebAssembly/gc/issues/77 

---


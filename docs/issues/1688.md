# #1688: API replacement for recently removed BinaryenRemoveImport

- **URL:** https://github.com/WebAssembly/binaryen/issues/1688
- **Author:** dcodeIO
- **Created:** 2018-09-25
- **Updated:** 2018-10-02

## Description

With `BinaryenRemoveImport` respectively `Module#removeImport` [removed](https://github.com/WebAssembly/binaryen/pull/1678/files#diff-f2e49d52952efd81aaa8fffb04d8b8eeL1784), there is no way currently to remove a memory or table import via the C- and JS-API while still keeping the memory intact otherwise. While this isn't super important, I used that for example in one asm.js test where there can't be a memory import, while otherwise emitting the same module.

If I understood correctly, what's necessary to remove an import is to unset `module` and `base` on a supported element, but I wonder what'd be the best way to implement this API-wise. If we'd use the internal name, there might be a memory, a table and a function all using name `0` for example. If we'd use the external name, we might end up having functions with no body that were previously imported. Any suggestions?

## Comments (3)

### kripken (2018-09-28)

I think something related came up in one of the PRs. My general thinking is that we should have a `BinaryenSetMemory` method which receives all the options for the memory, including whether it is imported or not. So you would call that and set the imported parameter to false.

---

### dcodeIO (2018-09-28)

Ok, so you are envisioning something like the following API to make an existing memory non-imported?

```c
BinaryenSetMemory(
  theModule,
  BinaryenMemoryGetInitial(theModule),
  BinaryenMemoryGetMaximum(theModule),
  BinaryenMemoryGetExportName(theModule),
  BinaryenMemoryGetSegments(theModule),
  BinaryenMemoryGetSegmentOffsets(theModule),
  BinaryenMemoryGetSegmentSizes(theModule),
  BinaryenMemoryGetNumSegments(theModule),
  false // imported
);
```

Not sure about the large amount of API calls necessary to do this, but we'd probably want getters and setters for all these things anyway at some point so it'd be ok I guess.

---

### kripken (2018-10-02)

I see your point. I agree that if we have the time then specific getters and setters for each field of the memory and table would be better.

---


# #953: Recreate and optimize control flow

- **URL:** https://github.com/WebAssembly/binaryen/issues/953
- **Author:** kripken
- **Created:** 2017-03-18
- **Updated:** 2017-05-22

## Description

We have a relooper API, which allows an arbitrary CFG as input, but it would also be useful to receive a wasm and go back to an arbitrary CFG from there. This would let us better optimize wasms not generated by us.

For example, the loop-switch pattern is something specifically worth making sure we can optimize well https://github.com/pipcet/asmjs/issues/7#issuecomment-287445096

Recreating a CFG is fairly easy (we have the CFGWalker for that). However, to fully optimize the loop-switch pattern and other things, we'd need to identify and utilize control flow / jump threading variables too.

## Comments (1)

### kripken (2017-05-22)

Recreating the cfg and re-relooping that was done in #1009.

What is left here is to possibly identify the loop-switch pattern and optimize that as well.

---


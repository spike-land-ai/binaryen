# #3921: asyncify_get_state is not generated by wasm-opt

- **URL:** https://github.com/WebAssembly/binaryen/issues/3921
- **Author:** kfkfkfkfkfkf
- **Created:** 2021-06-05
- **Updated:** 2021-06-08

## Description

I try,
`wasm-opt -O2 --asyncify 
      --pass-arg=asyncify-imports@env.func1 
      in.wasm -o out.wasm`
In out.wasm, 4 asyncify function(asyncify_start_unwind, asyncify_stop_unwind, asyncify_start_rewind, asyncify_stop_rewind) were generated, but asyncify_get_state was not generated.
How to generated asyncify_get_state by wasm-opt?


## Comments (1)

### kripken (2021-06-08)

Our tests show it being generated, so I'm not sure what could be going wrong for you:

https://github.com/WebAssembly/binaryen/blob/main/test/passes/asyncify.wast
=>
https://github.com/WebAssembly/binaryen/blob/main/test/passes/asyncify.txt

(the second is the output, and it contains that function while the first does not).

Do you have a testcase showing the issue?

---


# Binaryen Open Issues Summary

**Total issues reviewed:** 320
**Kept:** 319
**Deleted:** 1 (0 duplicates, 1 irrelevant, 0 useless)

## Bugs (70)
- #549: Binary encoding isn't fully validated — During parsing of binary-encoded files, the input isn't fully validated again...
- #1108: wasm-opt: tables cannot be declared after functions — wasm-opt appears to expect tables in textual wast to be declared before any f...
- #1441: wasm-reduce problems on OS X — Hi, check out my experience using wasm-reduce:
- #1582: Use wasm customSections, to fix Binaryen WASM to text format round tripping failing for side module — I have been investigating building a dynarec for an emulator using dynamic li...
- #2150: Does not compile on GCC versions < 5.0 — In support/alloc.h the usage of alignedalloc fails to compile on GCC versions...
- #2291: wasm::is{U,S}Integer64() doesn't work well around INT64_MAX — The latest clang points a minor bug for -Wimplicit-int-float-conversion.
- #2309: [wasm-validate] Error messages for name custom sections are not very concise — - When I add a name custom section the the start of a file, the error reads: ...
- #2410: Support source maps with wasm2js — Creating a tracking issue I can link to.
- #2418: shared:ERROR: unexpected error while trying to eval ctors   Fatal: ...stopping since could not flatten memory — I am receiving this error when building a WASM project with the upstream emsc...
- #2564: emscripten build with cmake fails in wasm-reduce — The rest of the tools link in a build with a fairly current emscripten (1.39....
- #2573: "skipping debug location info" warning — That warning comes from binaryen here:
- #2716: wasm2js: import { getTempRet0 } from 'env'; — I am using the wasm2js tool on a WebAssembly module written in Rust using was...
- #2999: rpath setup doesn't take user-specified LIBDIR path into account — The rpath set-up code in CMakeLists:81 doesn't account for setting CMAKEINSTA...
- #3057: Validate by default? — Binaryen tools validate the wasm input by default (there is a flag to disable...
- #3058: Stop building with assertions enabled by default? — Early in Binaryen's history we wanted assertions in all builds in order to ca...
- #3518: Split-dwarf support — Currently Binaryen supports rewriting DWARF information embedded in custom se...
- #3739: Reference types crash wasm-opt‘s asyncify pass — See issue for details.
- #3839: Asyncify "OOM" leaves broken state — Right now, emitted Asyncify unwind/rewind mechanisms always stores all the va...
- #3903: no 32bit binaries... fails to compile with latest mingw — i'm trying to compile this as part of the requirement for emscripten/emsdk, b...
- #4261: wasm-emscripten-finalize runs out of memory with -g option — I'm attempting to build a large project and debug it, but when building, the ...
- #4358: Missing 64-bit AtomicCmpxchg causes `__sync_fetch_and_nand` to fail under wasm2js — Usage of syncfetchandnand with 64-bit operands in emscripten causes the follo...
- #4470: Support Asyncify + Try-Catch [Can't build web-gphoto2 with -fwasm-exceptions instead of -fexceptions] — web-gphoto2 builds with pthreads, Asyncify, exceptions and LTO, and I'm not s...
- #4519: 64-bit atomic load not implemented — Trying to debug some code today with -sWASM=0 -pthread -sSAFEHEAP, and I get
- #4841: Names section on the side — Right now we have --symbolmap which emits a "symbol map" of indexes to functi...
- #4915: Add helper `getSingleMemory` — I wonder if it's worth having a method like wasm.getOnlyMemory that asserts t...
- #4919: Convert getMemoryOrNull to getMemory — Since we are producing a fatal error anyway, might as well call getMemory ins...
- #4920: Add fatal errors to memory vector size checks — I wonder if we should produce a fatal error here (and in similar places) so w...
- #4922: Halt stack.h with an error if multi-memories are present — This pass can probably halt with an error (like on line 49 above) if there ar...
- #4928: Add multi-memories assert to MemoryPacking — Maybe we should put an assertion here so we don't forget about this.
- #4929: Add assertion to RemoveUnusedModuleElements — Should we add an assertion?
- #4962: [C-API / JS-API] Binaryen crash if recent "memoryName" is null for memory ops — After 4811 and 4940
- #5017: ctor_evaller crashes with wasm64 input — From the emscripten test suite:
- #5245: Consider running tests with -D_LIBCPP_ENABLE_ASSERTIONS=1 — There's a handful of instances across binaryen/wasm-opt where there is "techn...
- #5648: Binaryen.js default stack size might be too low — Recently, a bunch of strange issues have appeared in conjunction with Binarye...
- #5688: wasm2js: unhandled unaligned store, UNREACHABLE executed at, Aborted — Trying to run wasm2js on HavokPhysics.wasm in https://github.com/BabylonJS/Ba...
- #5719: Verification error after function inlining — It seems binaryen (7d5d24f) creates invalid blocks after function body inlining.
- #5913: wasm-ctor-eval: Handle cycles with non-nullable content — The input module cleverly creates a cycle using a non-nullable field by creat...
- #5926: Empty/Leaked `pkg/*_bg.wasm-opt.wasm` file causing parse error on subsequent `wasm-opt` runs — I had a shell continuously building my project's WASM web target, while I was...
- #5932: Regression on optimized module size depending on final markers — The commit https://github.com/WebAssembly/binaryen/commit/7df30640820c9b4acfc...
- #5991: wasm2js/I64ToI32Lowering fails on 64-bit atomic stores (I think) test_atomic_wait64_notify — I'm currently landing a new test testatomicwait64notify which is failing unde...
- #6112: [Outlining] Debug need for `existingBuilder.build()` in ReconstructStringifyWalker::startNewFunction — What is this build for?
- #6391: wasm-opt: "compile unit size was incorrect" — I'm unsure what exactly triggers this issue, but I tried several versions: v1...
- #6406: Impossible address ranges in DWARF debug info — I've been working on a tool that parses DWARF debug info embedded in WebAssem...
- #6685: Missing optimization in Wasm for `x < 0 || x > constant` — The attached .wasm file has this code at offset 95044:
- #6879: SIGSEGV (Address boundary error)  in dumpDebugLoc(llvm::DWARFContext&, llvm::DWARFYAML::Data&) () — Hello, when I'm trying this command
- #6989: Flatten does not handle `BrOn`. — When running Binaryen with -O4 I get the following assertion failure:
- #6990: Asyncify does not support unwinding from functions returning non-nullable values — While testing some wasm-opt options for Wasocaml, I found the following asser...
- #7028: emited text contains tuple instructions even when using --intrinsic-lowering — I'm running Binaryen with -S (because I'm using a combination of proposals no...
- #7126: wasm2js aborts when allocating pages. — I'm running into some pretty serious issues using wasm2js.
- #7215: Silence some error output in the presence of multi-step commands — I am calling wasm-merge, wasm-metadce, and wasm-opt in sequence and the outpu...
- #7317: undefined asyncify_get_state — Is there currently a recommended way to go about calling asyncifygetstate fro...
- #7319: `wasm-opt -Oz` takes an inordinate amount of time — Firstly: yay, thank you for fixing the control-flow values issue in the parser!
- #7370: StringLifting? — It would be nice to allow toolchains to emit magic JS string imports all the ...
- #7408: Commandline tools and missing -o — wasm-opt warns on not having an output file.
- #7458: O2 regression in optimize-instructions due to coalesceLocals — Given the following code:
- #7503: Generate webassemby binary with DWARF information — I am writting a new compiler for a new language, my attention is use binaryen...
- #7570: wasm-opt crashes with segmentation fault on big project — We found that wasm-opt sometimes crashes with the error Segmentation fault (c...
- #7683: Fails to compile with g++ 15 — The repository currently fails to compile with g++ 15 (e.g.
- #7909: Error when installing — when installing using cmake on arch linux, i get this error
- #7911: Segfault with >120 versions on Linux — Initially, I found a segfault after upgrading kotlin, which generated a bit d...
- #7920: Branch hints fuzz bug — Unfortunately this cannot be automatically reduced.
- #8031: Fuzz bug with return_call_ref of imported function reference — Looks like the return call interpreter machinery does not look up function re...
- #8091: [Bug] Assertion failed isRef() in wasm::Type::getHeapType during BrOn::finalize — We encountered a SIGABRT (Assertion Failure) in wasm-opt.
- #8138: ctor-eval crashes when the same name is imported twice — https://github.com/WebAssembly/binaryen/pull/8115issuecomment-3661620019
- #8146: ctor-eval crashes when a non-env imported memory is written to — Similar to 8145, ctor-eval crashes when the ctor writes to an imported memory.
- #8203: MinifyImportsAndExports fails on duplicate names. — When running the minification pass with --minify-imports-and-exports-and-modu...
- #8238: Avoid generating trampolines with --no-placeholders — The wasm-split options --no-placeholders is used when the module loader can g...
- #8290: Wrong loop variable in processResumeHandlers causes incorrect subtyping constraints — In SubtypingDiscoverer::processResumeHandlers (src/ir/subtype-exprs.h, line 5...
- #8292: LLVMMemoryCopyFillLowering: table.copy/table.fill guards never called (uppercase Visit) — The visitTableCopy and visitTableFill guards in LLVMMemoryCopyFillLowering ar...
- #8312: Wasm-opt not deduplicating repeated struct.gets on unchanged local — Consider the larger wasm snippet below.

## Optimization Opportunities (38)
- #815: Find good inlining heuristics — We have the ability to inline, and a simple inlining pass using it.
- #953: Recreate and optimize control flow — We have a relooper API, which allows an arbitrary CFG as input, but it would ...
- #1764: List of missing peephole optimizations — Is it possible doing some trivial logical simplifications for now?
- #2139: Change default inlining behavior to favor single-caller inlines — See FIXMEs introduced in: https://github.com/WebAssembly/binaryen/pull/2125
- #2144: Inlining with -Os is suboptimal — We are very careful not to increase code size in that mode.
- #2951: redundant second cast to integer after already casted int value in asm.js? — https://webassembly.studio/?f=oeg02m22gmq
- #3244: Optimize trampled data in MemoryPacking — Background: 3222
- #3263: Read-only memory optimizations — This came up in the context of thinking about how to optimize file system cal...
- #3634: [Wasm Exceptions] Support Inlining of content with Try-Delegate — See https://github.com/WebAssembly/binaryen/pull/3633, for now we are disallo...
- #3867: --duplicate-function-elimination and "names" section — It is understandable that --duplicate-function-elimination removes debug info...
- #4124: Once Reduction Pass improvement — Recent Once Reduction pass properly handled following CFG in pseudocode:
- #4322: Optimize compressed size better — @RReverser noticed that running wasm-opt subsequently on already-optimized ou...
- #4681: Inlining breaks asyncify — While reading @kripken 's post on asyncify, I gave the test case shown a go:
- #4744: Aggressive optimization of `unreachable`s? — I have written a Binaryen pass that emits unreachables into the wasm tree.
- #4796: CSE for LEA-like operations — Currently binaryen can't do CSE for such cases:
- #4892: Simplify mutable globals with single write in "start" — It looks like simplify global pass doesn't take into account v128 types.
- #5006: Optimize sign checks on i8, i16 etc. — When in a boolean context, doing an extend and then <0 is the same as checkin...
- #5008: Optimize comparisons of adjusted values — Instead of dividing by 2 and then comparing, we can compare the original value.
- #5009: Optimize checks for higher bits using a low bit mask — (x & low-bit-mask) != x implies that x has some bit set that is larger than t...
- #5118: wasm-opt: Optimize out store of load with traps-never-happen — Such WebAssembly code snippet will not be optimized by wasm-opt
- #5206: standalone (non-js) binaryen.wasm — Toolchains such as TinyGo have the ability to run wasm (ex via wazero), but a...
- #5549: optimize for if with return statement — I have this code snippet
- #5755: Opportunity to further simplify internal cast representation — Right now almost all casts are represented as RefCast expressions, but ref.as...
- #6114: [Outlining] Simplify `filter` with a single call — It might be simpler to just call filter once from Outlining::run and pass it ...
- #6263: Simplify MemoryPacking output when traps never happen — We could simplify the output of MemoryPacking under TNH by not emitting the g...
- #7440: local-cse introduces side effects via local.tee, blocking DCE in O3 — Given the following code:
- #7470: local-cse in O3 introduces side-effecting across structurally isolated sub-trees thus prevent const prop &  DCE — Given the following code:
- #7556: Cannot optimize complex ge_u 0 out — Given the following code:
- #7581: PossibleContents is not a lattice — IIUC, we have this structure:
- #7652: RemoveUnusedBrs fails to optimize control flow based dead code — Given the following code:
- #7661: RemoveUnusedBrs causes ineffective code — Given the following code:
- #7672: SimplifyLocals causes ineffective code — Given the following code:
- #7723: [wasm-split] Option to disable split indirection/placeholders — I have wasm code that is set up in such a way that I know if a deferred funct...
- #7934: Binaryen writer seems to unnecessarily create multiple local sections for locals with same type — See the attached wasmoptlocalissue.tar.gz.
- #7972: Have a dual for `--no-inline` that will cause a function to be always inlined (modulo recursive inlining) — wasm-opt has the --no-inline=<function-name-glob-pattern> argument which one ...
- #8009: Missed optimization: failure to remove unnecessary locals usage with multi-value — Steps to Reproduce
- #8070: Support for emitting data that allows reconstructing original stack trace frames (including inlined frames) — The current support for source maps does not allow decoding stack traces in a...
- #8077: Running `wasm-opt` with `-Os` leaves NOP / dead control flow behind — See attached flute.tar.gz

## Feature Requests (97)
- #1010: Add support for module names in wasm binaries — Basically implement https://github.com/WebAssembly/design/pull/1055.
- #1040: auto-update problem on test/fib-dbg.wasm.fromBinary — Running ./autoupdatetests.py should be a no-op, but it breaks test/fib-dbg.wa...
- #1142: Explore Similar Function Elimination (SFE) optimization — See https://groups.google.com/d/msg/emscripten-discuss/XJr7jiXDuy8/G2eAHdmSAg...
- #1172: Constant propagation pass — We should add one.
- #1307: Creating relocatable binaries via AST — It doesn't appear that binaryen's AST has a way to include reloc sections.
- #1312: Steps for supporting a language.. — Apologies in advance as I'm just not sure where a general WebAssembly dev cha...
- #1358: Consider moving binaryen (and other tools) into a different org — Per @jfbastien, I am opening a separate issue to discuss possibly moving bina...
- #1480: wasm2asm miscompiles nested i64 ops — Compiling a function like:
- #1618: Add an option to emit tracing output to a file — The tracing option in the C API makes it easy to create testcases from code u...
- #1633: Missing import library for DLL — On Windows it seems the DLL is built, but no corresponding import library (LIB).
- #1688: API replacement for recently removed BinaryenRemoveImport — With BinaryenRemoveImport respectively ModuleremoveImport removed, there is n...
- #1710: How to compile C++ code in Web assembly — kripken (2018-10-24)
- #2040: [Proposal] loop fusion pass — LLVM added new pass called loop-fusion:
- #2198: I64ToI32Lowering fails on i64.trunc_sat_f64_s — Testcase: run bin/wasm-opt --flatten --i64-to-i32-lowering --all-features on
- #2308: [wasm-opt] Split functions that break the limit — All browsers (and Node) seem to implement the same size limit for functions (...
- #2321: Allow using Asyncify functions from a shared module — As discussed with @kripken earlier today, currently two asyncified WebAssembl...
- #2362: Increased scalability of the push_back function — Mixedarean.h，218行：
- #2414: Machine-generate instruction implementation code? — I think we can simplify the checklist of things to do for new instructions,
- #2423: Memory packing is not safe with imported memory — The MemoryPacking pass assumes that the initial memory is zero, so it is free...
- #2458: LIFO order optimization? — Not sure about this, but I find out code like this:
- #2651: wasm-reduce: don't require test file and working file — -t provides the test file, which is what the predicate script is supposed to ...
- #2786: Further enhancements to ExpressionRunner — I've meanwhile integrated the new ExpressionRunner (https://github.com/WebAss...
- #2850: Stack pointer checks do not handle an underflow of 0 — The LLVM wasm stack goes down, and if we start from X and ask for Y stack spa...
- #2917: Is it possible avoid c++ exeptions? — I mean build binaryen with emscripten with "-fno-exceptions" for asmjs / wasm.
- #2934: Add Asyncify mode that uses "native" stack — Something I mentioned in personal discussions with @kripken, posting here for...
- #3198: Unroll constant-sized loops — Sometimes it could greatly improve code size.
- #3704: Bad interaction with tuples and local.tee using the value type — Investigating the feasibility of using the type of local.tee's value, instead...
- #3772: [proposal] Dead Store Elimination Pass — It will be great to have DSE pass.
- #3854: [Proposal] Optimization for AoS with SIMD — Not sure where this should be best done - at the compiler level, at the binar...
- #3921: asyncify_get_state is not generated by wasm-opt — wasm-opt -O2 --asyncify
- #4161: [New Optimization Proposal] Propagate conditional result to branch / switch arms — could be optimize to:
- #4166: Improve selectify — I think I already mentioned a similar problem, but it was a long time ago.
- #4253: Add sign bit tacking for floating points — Similar to known maximum bits getMaxBits for integers we could track sign for...
- #4256: Add option to force table elements to be considered immutable — Binaryen has some optization that is unlocked when the table is immutable:
- #4274: Redundant global read — In situations when global reads immediately after write we could avoid this r...
- #4329: [Proposal] Add getMaxSignBits for tracking sign values — With existing getMaxBits we could provide wide range of optimizations but get...
- #4392: Program terminated with signal SIGKILL, Killed. — System information
- #4436: darwin/amd64: dyld: 'BinaryenTypeCreate' missing symbol called — See issue for details.
- #4527: [wasm-ctor-eval] Any way to zero the stack after calling wasm-ctor-eval? — I'm using wasm-ctor-eval as a great "extended compile-time evaluation" for wh...
- #4590: Support GC to non-GC conversion — As far as I know, a few GCed languages/platform are working on WASM support b...
- #4600: Missing SIMD impls in interpreter — Fuzzer found this:
- #4643: Add APIs for introspection of imports — As of right now, the current outward facing API (C, JS/TS, etc) allows you to...
- #4772: asyncify - option to use multiple memories — There are a few implementation of the nascent multiple memory proposal now.
- #4814: Support for all optimization passes with DWARF output? — It seems as though there are still a few optimization passes that invalidate ...
- #4918: Refactor BinaryenSetMemory API — In a follow-up we'll want to refactor this API so that segments are not so cl...
- #4930: Change example tests to pass null for memory name — a null is the best we could do, since we must still change the C API to add t...
- #4931: Add comments to multi-memories tests — Comments in these tests would be good, like without an explicit name, the fir...
- #4949: Dropped series of load ops to same address could be reduced to single op — Inspired by this issue
- #4971: Add toehold docs for Asyncify — The current source of Asyncify is here, but I think the only docs for it are ...
- #5004: Avoid extend/wrap to 64 bits when 32 are enough — This is an example of a more general rule: we could avoid extending and wrapp...
- #5005: Fold extend followed by operations that do not care about the extended bits — Comparing to zero is the same with or without extending: if was zero, it'll r...
- #5010: Use getMaxBits in comparisons — i32.ne returns 0 or 1, so it is max 1 bit, and that is always less than 128.
- #5011: Remove masks that are shifted out later — Only the top two bits are missing in the mask, and we shift left, so any effe...
- #5020: [Idea] Compress f64.const in integer domain for optimization for size — Since f64 operations do not use LEB128 encoding, such constants always takes ...
- #5343: Support try-catch in Asyncify / lower wasm exceptions to MVP — See discussion in https://github.com/WebAssembly/binaryen/pull/5143 - lowerin...
- #5405: Path variable to add in Windows — I need help in adding the right path to the environment variable on windows.
- #5546: --minify-imports should include module names — Either that we should add a new --minify-imports-and-modules.
- #5628: Table init exprs appear to be unimplemented — I would like to use tables of non-nullable values but Binaryen does not appea...
- #5633: SIMD add not being optimized away — The i64x2.add in the following WAT isn't being optimized at all (build/bin/wa...
- #5736: Adding APIs for in-memory operation without fs access — I've received a request to make it possible for wasm-opt-rs to perform optimi...
- #5741: StackCheck pass can do that wrong thing when no stack pointer is present — I notices a strange failure on HEAD with a test that I guess we don't run any...
- #5752: optimise LSBit mask (followed by branch) to use `ctz` — I have code snippets like
- #5796: Add a ControlChildIterator to parallel ValueChildIterator — Maybe we can add a ControlChildIterator to parallel ValueChildIterator, that ...
- #5902: adding bazel support — I've begin adding bazel support.
- #6111: [Outlining] Make `StackSignature`store `params` and `results` as a `Signature` — Hmm, unfortunate that StackSignature does not store params and results as a S...
- #6482: Asyncify: warn/error when functions match both ADD and REMOVE — Follow on to https://github.com/emscripten-core/emscripten/issues/13150
- #6615: Support custom section annotations — The annotations proposal adds support for text annotations that encode the co...
- #6616: Support branch hinting — The branch hinting proposal is close to reaching phase 4.
- #6622: Adding unsubtyping to O3 — I experimented with adding the unsubtyping pass to the O3 pipeline.
- #6728: Add support for Wasm components in wasm-opt — wasm-opt does not support running on a Wasm component, that is the default wi...
- #6775: support to add custom sections at the beginning of module — Now custom sections can be placed at the end of module with WasmBinaryWriter:...
- #6783: Start publishing signature files for binaryen artifacts — Start publishing armored signature files for binaryen artifacts.
- #6823: Support cross-module calls properly in the interpreter — Right now some things like function and tag literals store a name.
- #6873: Support `Custom Page Sizes` proposal — Currently, the WASM page size is fixed at 64KiB, which is rather expensive in...
- #6930: `select` not optimized when condition is true and ifFalse arm isn't pure — Consider the following expression:
- #7176: Escaping issues in json.h — https://github.com/WebAssembly/binaryen/pull/7175discussionr1894409313
- #7179: Lower WASM exceptions to MVP (or maybe GC) — Many C++ libraries require exceptions, like libriscv and Binaryen itself.
- #7291: NaN flip a sign bit on ARM(el) — As can be seen in this build log
- #7301: [C API] Some BinaryenString* functions declared in binaryen-c.h without implementation — - BinaryenStringIterNext
- #7358: wasm2js: support multiple tables — Currently wasm2js does not support multiple tables.
- #7397: [wasm-merge] Does not print to stdout if `-o` is not specified — I finally have a use-case for wasm-merge and trying to use it made me think t...
- #7417: `scripts/fuzz_opt.py` can not be invoked from `scripts/` — will work just fine, but:
- #7566: Way of using binaryen without optimization passes — I would like to use binaryen just to emit WASM modules without optimizations,...
- #7574: Pure calls / future of call.without.effects — Atm we provide a way to say that a call has no side effects with an intrinsic...
- #7583: Create lowering pass for llvm usage of extended-const — If/when we enable extended-const by default in LLVM we will need a correspond...
- #7647: Tail-Call optimization — I'm curious as to why binaryen doesn't implement an optimization pass for tai...
- #7707: Name section: Support label names (id 3) — I get this when running wasm-opt on the attached .wasm file
- #7724: [wasm-split] Allow splitting globals — The wasm-split tool only has support for splitting functions but it does not ...
- #7861: `--print-function-map` performs strange escaping on symbol name — See https://github.com/emscripten-core/emscripten/issues/24982.
- #7864: The wasm-reduce tool encountered an abnormal timeout under the condition of "--command=./wasmer run test.wasm" — Phenomenon description
- #8069: different behavior when opt `fsqrt` with negative number in arm64 and x64 — Literal will use std::sqrt to calculate f32.sqrt and f64.sqrt.
- #8117: Clean up FailToEvalExceptions and import stubbing in wasm-ctor.cpp — The way that imports are handled in wasm-ctor.cpp is pretty unclear today.
- #8180: Refactorings to imports in Binaryen — See issue for details.
- #8198: Combining data segments — AssemblyScript tends to produce a lot of (data ...) entries which are adjacen...
- #8266: Compiling to WGSL — It would be interesting, particularly for languages like AssemblyScript if Bi...
- #8315: Waitqueue / waitqueue ref support in Binaryen — From the Shared Everything Threads proposal.
- #8325: wasm-opt --flatten fails with exceptions or GC — When running wasm-opt on the following WASM file demo.wasm.zip, using -O4 or ...

## Performance (18)
- #1338: Speed up LocalGraph — src/ir/local-graph.h is fairly slow, and we should make it faster.
- #1663: Slow to disassemble some crafted wasm files — wasm-dis may sometimes spend too much time to disassemble certain crafted was...
- #1929: Future of wasm2js — I'd like to do some work on wasm2js.
- #2740: Reduce threading overhead — Our threading overhead seems significant.
- #4165: Make compilation faster :rocket: — I did some investigation on the speed of compilation.
- #4403: Replacing `memset` and `memcpy` calls with `memory.fill` and `memory.copy`? — If I were to try working on a wasm-opt pass doing what's written in the title...
- #4452: SmallVector could call constructors only when relevant — The fixed storage there is a std::array which constructs the items immediately.
- #4619: wasm-opt performance — I am working what would expect to be a rather large c++ code based and compil...
- #5007: Avoid wrapping when 64-bit operations are enough — All the operations work fine on 32 or 64 bit.
- #5088: wasp-opt makes bcrypt code slower — I'm not sure if this is issues you want to receive, but I ran into this and t...
- #6338: wasm-opt wasm port performance — This issue is about porting wasm-opt itself to wasm, and how fast it runs there.
- #6509: Run (basic) StackIR optimizations in all binary writes? — Atm we enable StackIR optimizations in -O3 and -Os and above.
- #6931: Improving Precompute performance — Running on the binary from Google Sheets,
- #7304: Avoid hosting allocations (especially array allocations) out of conditional paths — We have for example this Dart code
- #7453: Cache locality and speed — Talking with @tlively , we realized that --roundtrip will restructure code ba...
- #7705: wasm-opt is 35x slower on windows compared to linux — See the output produced by building a ~46MB wasm binary and ~47MB JSPI wasm b...
- #7712: wasm-opt for WASIp2 — Over in https://github.com/llvm/llvm-project/issues/147201, @singleaccretion ...
- #7722: [wasm-split] Slow splitting many modules — For a large file, wasm-split with --multi-split takes 3.5+ minutes to separat...

## Spec Compliance (30)
- #1469: Invalid LEBs are incorrectly accepted by binary loading — See https://github.com/WebAssembly/wabt/issues/799issuecomment-371973178
- #1485: Type-check invalid unreachable code — however, the spec interpreter and wabt doesn't, reporting:
- #1541: Invalid unreachable loop in text format — The loop is unreachable, but we need to emit an unreachable after the loop to...
- #2354: Asyncify lists use * as a wildcard, but function names can have * — The names are full C++ names, so e.g.
- #2555: Supporting up-to-date spec test format — I updated our spec test suite to up-to-date version in 2484, but there are nu...
- #2983: test failures on s390x (big-endian) — When running version 95 tests on a big-endian machine like s390x, I get the f...
- #3029: Can we do more table element stripping in RemoveUnusedModuleElements? — In RemoveUnusedModuleElements we clear the entire table if there is no usage ...
- #3059: Replacing Stack IR with Poppy IR — The latest code pushed to my stackify branch (diff) implements a new form of ...
- #3372: Don't print the whole disassembly upon validation error — I'm getting "[wasm-validator error in module] unexpected true: Exported globa...
- #3470: wasm-emscripten-finalize does not escape characters — For example, it generates invalid json for the following wasm file:
- #3545: wasm-dis should run validation — We recently allowed printing expression contents with respect to features in ...
- #3646: CoalesceLocals N^2 memory usages of "copies" (affects AddressSanitizer -O3 builds on large wasm file) — I've found that wasm2js is getting terminated during execution,
- #3759: Flatten pass can make invalid modules on tuple types — This came up while fuzzing, and I traced it using git bisect to PR 3710 where...
- #3922: Do not pop from the polymorphic stack (was: Parse expection on unreachable struct.set) — When processing this module using https://github.com/WebAssembly/binaryen/com...
- #3934: Invalid optimization to select with --ignore-implicit-traps — Optimizing this program with -all -O1 --ignore-implicit-traps:
- #4129: struct.get is silently turned into struct.get_u for packed fields — It would be more correct for this to be a validation failure.
- #4518: wasm2js does not support 64-bit memories — For C++ source code,
- #4550: [wasm-as/wasm-dis]: Don't say the input/output is WebAssembly Text because it's not — The s-expression language used by wasm-as and wasm-dis is non-compliant.
- #5466: Using two reloopers in one function can cause block name collisions. — I am writing a WebAssembly compiler backing for the V programming language us...
- #5599: Invalid non-nullable local binary emitting related to unreachability — bin/wasm-as -all --nominal wat -o wasm emits a binary that V8 complains about...
- #5721: `BrOn` does not support carrying additional values — The spec allows all branches to carry an arbitrary number of values to their ...
- #6194: Questions Related to the Validation of Raw Input Bytes in C API — Hi developers, I have a problem (or somewhat feature request) related to the ...
- #6443: Emitting unreachable for unemittable String instructions can fail due to blocks — https://github.com/WebAssembly/binaryen/pull/6415 solves most of the problem ...
- #6612: Import and run the upstream spec tests — Now that wasm-shell parses the standard wast format, we should import and run...
- #6613: Use ChildTyper in the validator — The validator uses a large amount of code to check that child expressions hav...
- #6860: wasm-as/wasm-dis seem to miscompile ref.null with type-index heap type — I've noticed some seemingly incorrect behavior in binaryen working with one o...
- #6965: Relaxing closed world validation and improving open world optimization — The --closed-world flag lets us assume that we can make arbitrary changes to ...
- #7626: Non-UTF string builtins constants? — Discussing with @tlively , we thought it would be good to take the string bui...
- #8261: Improve interpreter spec test coverage — Failing spec tests as of November:
- #8313: Missing fp16 type validation — It looks like e.g.

## API Issues (44)
- #782: Test suite failures on test/validator/invalid_import.wast and test/validator/invalid_export.wast — Running the test suite on OS X (log), Linux (log) and Windows, they all fail ...
- #1012: Tests fail on s390x system — Complete build log: binaryen-1.37.12-r0.log.txt
- #1048: How use wasm code without import external file — 1- How use this wasm code without import external file ('test.wasm')?
- #1215: Handling of exported _GLOBAL__sub_I_* functions — First off, I'm not sure if binaryen is the right place to raise this as this ...
- #1370: testing with out-of-tree builds fails when running binaryen.js testcases — Build in an out-of-tree directory, /out/of/tree.
- #1371: Global to local optimization idea — I have the following scenario
- #1492: Inlining exported functions, -O vs -O3 — Having the following unoptimized module with an exported and an internal func...
- #1562: wasm2asm: Needs support for exported tables — Right now if a table is exported from a wasm module no bindings for that are ...
- #1603: Missing C API for inspecting Memory? — Currently, there is BinaryenSetMemory in C API, but we don't have something l...
- #1955: Dynamic Linking with emscripten. — I have been trying to experiment with dynamic linking of wasm modules i.e.
- #2310: Wasm vs Wasm2js export naming is incompatible — With Wasm2js generating valid ES modules, some information about export names...
- #2322: Provide a way to detect asyncified exports — Currently, Asyncify pass transforms only functions that call into potentially...
- #2411: binaryen.js wasm-opt commandline tool — Currently binaryen.js provides a JS API.
- #2456: Can BinaryenTypeAuto be deprecated? — This magical type only exists in the C API.
- #2468: [Feature] Evaluated case elimination pass — current with -O4:
- #2504: Improve scheme to generating internal names — Today binaryen will use the name section to come up with internal names for t...
- #3281: Move wasm2js import/export name mangling into a separate optional pass — See https://github.com/WebAssembly/binaryen/pull/3216 for background.
- #3313: Fatal: Module::addExport: empty name when using binaryen.js — Using a release version of Binaryen.js, I am (sometimes) hitting an assertion...
- #3392: CSE doesn't work for subexpressions with implicit trap — I have very simple example:
- #3661: Iterator related warnings in visual studio build — Last modified here https://github.com/WebAssembly/binaryen/commit/9752196fd13...
- #4093: LICM pass stopped working — After some of this changes: 4059 or 4077 or 4076
- #4175: Missing opportunity for redundant set elimination — When variable used in basic block it could be also eliminated.
- #4268: Merge two if-blocks into one if conditions the same — expected output:
- #4592: SIMD types and instructions aren't documented in the JS API — I'm reading https://github.com/WebAssembly/binaryen/wiki/binaryen.js-API and ...
- #4858: Code motion with the same side effects in branches does not always work — It seems CodeFolding can't handle such case with side effects (division):
- #4891: Extra pass for v128 operands in exported functions and globals? — At current moment, we can produce such code:
- #5201: Provide a pkg-config file? — Could Binaryen produce a pkg-config file when it is built?
- #5748: How to define parameter names? — Hello, new here.
- #5751: GUFA mishandles escaping functions — Consider the following module:
- #6460: Output structured data format based on wasm-delegations.def — Based on https://github.com/WebAssembly/binaryen/discussions/6225discussionco...
- #6491: How to traverse memory segments and get their data? — I'm using binary-c API.
- #6506: How to remove no-op exported functions? — Discussed in https://github.com/WebAssembly/binaryen/discussions/6501
- #6788: Are there plans for Rust bindings? — I am not qualified to write rust bindings for the C apis.
- #7120: Missed opportunity to merge private types into public supertypes — MergeTypes currently treats all public types as terminal DFA states, meaning ...
- #7163: Binaryen's Emscripten bindings do not support WASM_BIGINT — Currently the tests fail when BIGINT is enabled:
- #7272: BinaryenAddFunctionImport lost internalName on export, is this intentional? — i think add and Get , It's a bit wasteful.
- #7457: Provide some way for C & JS to visit and transform module code — Currently, Binaryen uses custom passes to transform Wasm (e.g.
- #7493: [Emitting Zero] [Local Tracking] General rule might not handle unary ne emitting zero bits well — Given the following code:
- #7526: `binaryen.js` seems to not longer be maintained — The Binaryen.js repo seems to not be active for at least a year.
- #7645: wasm2js: function table undefined after calling async function — A wasm2js-transpiled JS module is throwing an error after an async call, but ...
- #7657: [wasm-opt] `--minify-imports-and-exports-and-modules` does not report module renames. — When using wasm-opt with the --minify-imports-and-exports-and-modules flag, t...
- #7976: Final exports for wasm-merge? — In projects that merge files, many of the exports in the intermediate files m...
- #8106: wasm-split fuzzing and reusing an existing Table — I seem to recall we discussed using a new Table in wasm-split, when reference...
- #8120: Discussion: Binaryen Wasm Component — I haven't seen anything on this and was curious if anyone has attempted this ...

## Meta / Tracking (7)
- #4026: plan to create DWARF section — Hello, as far as I know, binaryen currently only has the ability to modify DW...
- #4277: Priority list for OptimizeInstructions reviews — @kripken suggested creating a list of PRs here, sorted in order of priority (...
- #6617: Improvements enabled by new wat parser — This is an umbrella tracking issue for further improvements enabled by the ne...
- #7403: Difficulties with internally using refined types — We currently use or plan to use more refined types in the IR than we will eve...
- #7552: wasm-opt version on crates.io — Hi, I noticed that the latest version of wasm-opt as part of binaryen is 123,...
- #7644: Massive memory growth for -O3, -O4, -Os and -Oz, in ssa-nomerge — I am planning on applying wasm-opt to my Go project as part of https://github...
- #7726: Dart deferred loading meta issue — The Dart team is experimenting with using binaryen tools to support our defer...

## Test / CI (12)
- #2230: Automate reduction from fuzz_opt.py — If we could automatically run wasm-reduce on a failing testcase that might sa...
- #2491: Integrate ASan with MixedArena — After re-enabling ASan in 2490, we should make it more useful
- #2781: Dwarf tests fail on windows due to path seperators — I noticed this when enabling windows testing as part of CI for the time in 2646.
- #3231: split_wast does not check for unbalanced parens — @aardappel saw that while splitting a module up, it may ignore stuff at the e...
- #4391: A stack-overflow in printf_common() — System information
- #4524: RedundantSetElimination: Nondeterminism testcase — Fuzzer found issue on seed 14358101859341333857.
- #4710: In I64ToI32Lowering pass, lowerReinterpretFloat64() and lowerReinterpretInt64() are not multithreading, ASAN, STACK_OVERLOW_CHECK or SAFE_HEAP safe — In https://github.com/WebAssembly/binaryen/blob/fc00dcc64c337a8128fbf2b5fbdb4...
- #5916: Fuzzer iteration takes over an hour — At commit 0d3c2eeb634913643f2cade4b5d738962b2308c2 I'm getting this:
- #6060: Policy on requirements to compile and/or run Binaryen — Binaryen has started to use some C++20 features, and it would be nice to use ...
- #6113: [Outlining] Consider replacing state enum with a single `IRBuilder* currBuilder` field — Just realized that it would be possible to replace this state enum with a sin...
- #7419: wrong documentation when using `scripts/fuzz_opt.py --help` — When running the command below, the output is mentioning a check.py file and ...
- #8366: `pass` test failures on 32-bit systems — I get test failures in passes/Ofast-math.wast and passes/optimize-instruction...

## Documentation (3)
- #4924: Make readMemoryAccess() return value more explicit — Does this return the memory index, or something else?
- #4925: Add comment of memory assumption to wasm-debug — Worth a comment here that we assume all memories have the same type (all 32 o...
- #7916: [wasm-opt]  Global variables are not shared between threads, so using wasm-opt `--multi-memory-lowering` will cause memory corruption. — Please ignore this comment and read on.

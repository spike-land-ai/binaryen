# #5206: standalone (non-js) binaryen.wasm

- **URL:** https://github.com/WebAssembly/binaryen/issues/5206
- **Author:** codefromthecrypt
- **Created:** 2022-11-01
- **Updated:** 2022-12-21

## Description

Toolchains such as TinyGo have the ability to run wasm (ex via wazero), but are currently forking processes in order to optimize wasm they generate. It would be great to have a standalone or wasi target of Binaryen so that non-browser compilers can use tools here without forking.

Tips on how to achieve this are thanks to @kripken https://github.com/WebAssembly/binaryen/issues/1051#issuecomment-1298890256

## Comments (3)

### tlively (2022-11-02)

> but are currently forking processes

Does this imply that these tools are running natively rather than as Wasm themselves? If so, can't they use native builds of Binaryen?

---

### codefromthecrypt (2022-11-02)

There are a couple use cases I know of directly:

One is tinygo which has a system dependency on wasm-opt https://github.com/tinygo-org/tinygo/blob/b5ad81c884981f42c1ac491cc1d195aea886ddbe/goenv/goenv.go#L115-L116
I don't know the mechanics of trying to fuse tinygo to binaryen directly, but they currently aren't.

Another is those running wazero, which is pure go, no C LLVM deps or anything, and want to optimize wasm accordingly without system dependencies or CGO.

---

### anuraaga (2022-12-21)

Looked into seeing if this codebase builds with wasi-sdk, there is some use of threads that can be worked around in different ways that don't really effect semantics, but there seem to be heavy use of exceptions in a couple of areas, notably parsing, which can't really be worked around with significant changes including to function signatures. Unless there is an appetite for that refactoring, we'd need to wait for wasi-sdk and runtimes to support the exceptions proposal to build.

---

